<?php header(_1781465580(0));header(_1781465580(1));function SSL(){if($_SERVER[_1781465580(2)]== _1781465580(3)or $_SERVER[_1781465580(4)]==_1781465580(5)){return _1781465580(6);}elseif(!empty($_SERVER[_1781465580(7)])&& $_SERVER[_1781465580(8)]== _1781465580(9)||!empty($_SERVER[_1781465580(10)])&& $_SERVER[_1781465580(11)]== _1781465580(12)){return _1781465580(13);}return _1781465580(14);}function proxytest($prx){$ch=curl_init();curl_setopt($ch,CURLOPT_URL,_1781465580(15));curl_setopt($ch,CURLOPT_PROXY,$prx);curl_setopt($ch,CURLOPT_CONNECT_ONLY,1);curl_setopt($ch,CURLOPT_TIMEOUT,5);$r=curl_exec($ch);curl_close($ch);if(!$r){return false;}else{return true;}}require_once _1781465580(16);is_array($INT)?:exit(_1781465580(17));$Nach=$_POST[_1781465580(18)];$mds=$_POST[_1781465580(19)];$timeout=$_POST[_1781465580(20)];$progres=$_POST[_1781465580(21)];$_POST[_1781465580(22)]=md5($INT[_1781465580(23)]);$_POST[_1781465580(24)]=$ggi=SSL() ._1781465580(25) .$_SERVER[_1781465580(26)] ._1781465580(27);$_POST[_1781465580(28)]=SSL() ._1781465580(29) .$_SERVER[_1781465580(30)] ._1781465580(31) .base64_encode($_POST[_1781465580(32)] .$_POST[_1781465580(33)]);unset($_POST[_1781465580(34)],$_POST[_1781465580(35)],$_POST[_1781465580(36)],$_POST[_1781465580(37)]);if($proql=mysqli_fetch_assoc(mysqli_query($s,_1781465580(38)))){$PROXY=$proql[_1781465580(39)];}else{$PROXY=NULL;}if($mds == _1781465580(40)or $_POST[_1781465580(41)]== _1781465580(42)){require _1781465580(43);}else{require _1781465580(44);$res=includs($_POST[_1781465580(45)],$_POST,0,$PROXY);}if(preg_match(_1781465580(46),$res,$mtc)){switch($mtc[1]){case _1781465580(47):$error=base64_encode(_1781465580(48));$stmt=mysqli_prepare($s,_1781465580(49));mysqli_stmt_bind_param($stmt,_1781465580(50),$error,$progres,$timeout,$mds);mysqli_stmt_execute($stmt);mysqli_stmt_close($stmt);echo _1781465580(51);break;case _1781465580(52):mysqli_query($s,"UPDATE bus_proc SET ot='$Nach'");mysqli_query($s,"UPDATE bus_serv SET progr='$progres', ers=NULL, date='$timeout' WHERE mds='$mds'");echo _1781465580(53);break;case _1781465580(54):$error=base64_encode(_1781465580(55));$stmt=mysqli_prepare($s,_1781465580(56));mysqli_stmt_bind_param($stmt,_1781465580(57),$error,$progres,$timeout,$mds);mysqli_stmt_execute($stmt);mysqli_stmt_close($stmt);echo _1781465580(58);break;case _1781465580(59):$error=base64_encode(_1781465580(60));$stmt=mysqli_prepare($s,_1781465580(61));mysqli_stmt_bind_param($stmt,_1781465580(62),$error,$progres,$timeout,$mds);mysqli_stmt_execute($stmt);mysqli_stmt_close($stmt);echo _1781465580(63);break;case _1781465580(64):if(strpos(file_get_contents($ggi),_1781465580(65))===false){$error=base64_encode(_1781465580(66));}else{preg_match(_1781465580(67),$res,$erc);$error=base64_encode(_1781465580(68) .ini_get(_1781465580(69)) ._1781465580(70) .ini_get(_1781465580(71)) ._1781465580(72) .$erc[1]);}$stmt=mysqli_prepare($s,_1781465580(73));mysqli_stmt_bind_param($stmt,_1781465580(74),$error,$progres,$timeout,$mds);mysqli_stmt_execute($stmt);mysqli_stmt_close($stmt);echo _1781465580(75);break;case _1781465580(76):preg_match(_1781465580(77),$res,$erc);if($erc[1]== _1781465580(78)){mysqli_query($s,_1781465580(79));exit(_1781465580(80));}$error=base64_encode($erc[1]);$stmt=mysqli_prepare($s,_1781465580(81));mysqli_stmt_bind_param($stmt,_1781465580(82),$error,$progres,$timeout,$mds);mysqli_stmt_execute($stmt);mysqli_stmt_close($stmt);echo _1781465580(83);break;case _1781465580(84):echo _1781465580(85);break;}}else{if(isset($PROXY)&&!proxytest($PROXY)){mysqli_query($s,_1781465580(86));exit(_1781465580(87));}if($headers=@get_headers($_POST[_1781465580(88)])){preg_match(_1781465580(89),$headers[0],$matches);if($matches[0]== _1781465580(90)){if(strpos(file_get_contents($_POST[_1781465580(91)] ._1781465580(92)),_1781465580(93))===FALSE){$error=_1781465580(94) .htmlspecialchars($res);}else{$error=_1781465580(95) .htmlspecialchars($res);}}else{$error=_1781465580(96) .$matches[0] ._1781465580(97) .htmlspecialchars($res);}}else{$error=_1781465580(98) .htmlspecialchars($res);}$error=base64_encode($error);echo _1781465580(99);$stmt=mysqli_prepare($s,_1781465580(100));mysqli_stmt_bind_param($stmt,_1781465580(101),$error,$timeout,$mds);mysqli_stmt_execute($stmt);mysqli_stmt_close($stmt);} function _1781465580($i){$a=array("Cache-Control: no-store, no-cache, must-revalidate",'Pragma: no-cache','HTTPS','on','REQUEST_SCHEME','https','https','HTTP_X_FORWARDED_PROTO','HTTP_X_FORWARDED_PROTO','https','HTTP_X_FORWARDED_SSL','HTTP_X_FORWARDED_SSL','on','https','http','https://www.google.ru/',"../dbuser.php",'#0#','Nach','mdServ','times','Prog','key','login','give','://','SERVER_NAME','/bimailer/flash/givi.php','%link%',"://",'SERVER_NAME',"/bimailer/unsubscribe.php?otp=",'%psev%','%A%','mdServ','Nach','times','Prog',"SELECT val FROM bus_conf WHERE nam='proxy' AND val2='1'",'val','1a1a1','type','1','next.php','post.php','%serv%',"/#(\d)#/s",'0','Файл bisend.php принадлежит другому пользователю. Перезалейте файл на используемый хостинг, скачав его по ссылке ниже.','UPDATE bus_serv SET ers=?, Gisp="false", progr=?, date=?, isp="false" WHERE mds=?','ssss','#2#','1','#1#','2','<strong>Функция mail() вернула отрицательны ответ.</strong>
			<p>Иногда отказ отправки может быть вызван недоступностью файлов или картинок в проекте письма, поэтому поиск причины следует начинать с отправки простейшего письма содержащего только текст.</p>
			<p>Дело обстоит хуже, если отказ вызван неверной настройкой связки PHP + SMTP или самого SMTP сервера.</p>
			<p>Если рассылка через bisend велась и mail() перестала работать, то скорее всего превышен лимит рассылки установленный в настройках хостинга, где лежит bisend.</p>','UPDATE bus_serv SET ers=?, progr=?, date=?, isp="false" WHERE mds=?','ssss','#2#','3','Функция mail() запрещена к использованию в настройках PHP. Измените параметр disable_functions в php.ini или поинтересуйтесь в хостера.','UPDATE bus_serv SET ers=?, progr=?, date=?, isp="false" WHERE mds=?','ssss','#2#','4','#0#','Вероятно у вас неверно настроены DNS записи. Локальный DNS запрос не может обратиться к файлам на этом хостинге. Проверьте NS записи или используйте удаленные сервера для рассылки.',"/#4#(.+?)#4#/s",'Функция stream_get_contents не может получить файлы скрипта. Это связано с параметрами PHP allow_url_fopen и open_basedir или настройками фаервола.
			allow_url_fopen: ','allow_url_fopen','
			open_basedir: ','open_basedir','
			ошибка связи с: ','UPDATE bus_serv SET ers=?, progr=?, date=?, isp="false" WHERE mds=?','ssss','#2#','5',"/#5#(.+?)#5#/s",'4','UPDATE bus_conf SET val2=2 WHERE nam="proxy"','#4#','UPDATE bus_serv SET ers=?, progr=?, date=?, isp="false" WHERE mds=?','ssss','#2#','6','#3#','UPDATE bus_conf SET val2=2 WHERE nam="proxy"','#5#','%serv%','/\d{3}/','200','%serv%','?bisend=1','#bisend#','<h3>Указаный URL не является файлом для рассылки<h3>','<h3>Файл доступен, однако произошла неизвестная ошибка:</h3>','Код ответа сервера <a href="https://www.bertal.ru/help.php?ex=1">','</a>.<br>','Сервер недоступен или неотвечает. Проверьте правильность указанного адреса. ','#2#','UPDATE bus_serv SET ers=?, Gisp="false" date=?, isp="false" WHERE mds=?','sss');return $a[$i];}